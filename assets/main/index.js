System.register("chunks:///_virtual/Controller.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var r,t,n,o,i,a,l,u,c;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,l=e.CameraComponent,u=e.Node,c=e.Component}],execute:function(){var s,p,y,g,f,b,d,h,m;i._RF.push({},"7a9c9kU265N/7krnrBoF8Zq","Controller",void 0);var v=a.ccclass,C=a.property,P=1;e("Controller",(s=v("Controller"),p=C({type:l}),y=C({type:u}),g=C({type:u}),s((d=r((b=function(e){function r(){for(var r,t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return r=e.call.apply(e,[this].concat(i))||this,n(r,"camera",d,o(r)),n(r,"background",h,o(r)),n(r,"guyGenerator",m,o(r)),r}return t(r,e),r.prototype.lateUpdate=function(e){var r=this.camera.node.getPosition(),t=this.guyGenerator.getPosition();r.x>2e3?P=-1:r.x<0&&(P=1);var n=40*P*e;this.camera.node.setPosition(r.x+n,r.y,0),this.guyGenerator.setPosition(t.x+n,t.y,0),this.background.setPosition(r.x+.5*P*e,r.y,0)},r}(c)).prototype,"camera",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=r(b.prototype,"background",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=r(b.prototype,"guyGenerator",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=b))||f));i._RF.pop()}}}));

System.register("chunks:///_virtual/GuyGenerator.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,n,i,o,a,s,u,c,l,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.Prefab,u=e.instantiate,c=e.UITransform,l=e.math,y=e.Component}],execute:function(){var p,h,f,d,g;o._RF.push({},"716c0gSvONJIojHxxkX66EA","GuyGenerator",void 0);var v=a.ccclass,G=a.property;e("GuyGenerator",(p=v("GuyGenerator"),h=G({type:s}),p((g=t((d=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(t,"guyPrefab",g,i(t)),t}r(t,e);var o=t.prototype;return o.start=function(){this.generateGuy()},o.generateGuy=function(){var e=u(this.guyPrefab),t=this.node.getPosition(),r=this.node.getComponent(c);this.node.addChild(e);var n=l.randomRange(-r.width/2,r.width/2);console.log(t.x,n,r.width);var i=new l.Vec3(n,0,0);e.setPosition(i),setTimeout(this.generateGuy.bind(this),200),setTimeout((function(){e.destroy()}),1e4)},t}(y)).prototype,"guyPrefab",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=d))||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./Controller.ts","./GuyGenerator.ts","./Tilemap.ts"],(function(){"use strict";return{setters:[null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Tilemap.ts",["./rollupPluginModLoBabelHelpers.js","cc","./hull.mjs_cjs=&original=.js","./index.mjs_cjs=&original=.js","./index.js","./hull.js"],(function(e){"use strict";var t,r,i,n,o,a,l,s,u,c,p,f,h,d,g,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.createForOfIteratorHelperLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,l=e._decorator,s=e.RigidBody2D,u=e.PhysicsSystem2D,c=e.EPhysics2DDrawFlags,p=e.TiledLayer,f=e.PolygonCollider2D,h=e.Vec2,d=e.Component},null,null,function(e){g=e.default},function(e){b=e.default}],execute:function(){var v,y,m,D,w,C;a._RF.push({},"fb4bdNOk2dGxJ+B8uDYMVlv","Tilemap",void 0);var j=l.ccclass,P=l.property,T=l.requireComponent;e("Tilemap",j("Tilemap")(v=T(s)((m=t((y=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,n(t,"debug",m,o(t)),n(t,"hullConcavity",D,o(t)),n(t,"neighborhoodRadius",w,o(t)),n(t,"clusterNeighborsPoints",C,o(t)),t}r(t,e);var a=t.prototype;return a.onLoad=function(){this.debug&&(u.instance.debugDrawFlags=c.Aabb|c.Pair|c.CenterOfMass|c.Joint|c.Shape)},a.start=function(){var e=this.node.getComponent(p),t=e.leftDownToCenterX,r=e.leftDownToCenterY,n=e.getMapTileSize(),o=n.width,a=n.height,l=e.vertices,s=[];this.debug&&console.log("vertices",l);for(var u,c=i(l);!(u=c()).done;){var d=u.value;if(void 0!==d)for(var v=0,y=Object.entries(d);v<y.length;v++){var m=y[v],D=(m[0],m[1]);if("object"==typeof D)for(var w=D.left,C=D.bottom,j=0,P=[[w,C],[w+o,C],[w+o,C+a],[w,C+a]];j<P.length;j++){var T=P[j];s.push([T[0]-t,T[1]-r])}}}var z=(new g.DBSCAN).run(s,this.neighborhoodRadius,this.clusterNeighborsPoints);this.debug&&console.log("clusters",z);for(var R,_=z.map((function(e){return e.map((function(e){return s[e]}))})),F=i(_);!(R=F()).done;){var L=R.value,N=b(L,this.hullConcavity),S=this.node.addComponent(f);S.points=N.map((function(e){var t=e[0],r=e[1];return new h(t,r)})),S.apply()}},t}(d)).prototype,"debug",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),D=t(y.prototype,"hullConcavity",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),w=t(y.prototype,"neighborhoodRadius",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),C=t(y.prototype,"clusterNeighborsPoints",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),v=y))||v)||v);a._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});